(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-527de5ae"],{"28a5":function(t,e,a){"use strict";var s=a("aae3"),n=a("cb7c"),r=a("ebd6"),i=a("0390"),o=a("9def"),c=a("5f1b"),l=a("520a"),d=a("79e5"),u=Math.min,v=[].push,h="split",m="length",p="lastIndex",f=4294967295,_=!d(function(){RegExp(f,"y")});a("214f")("split",2,function(t,e,a,d){var b;return b="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[m]||2!="ab"[h](/(?:ab)*/)[m]||4!="."[h](/(.?)(.?)/)[m]||"."[h](/()()/)[m]>1||""[h](/.?/)[m]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!s(t))return a.call(n,t,e);var r,i,o,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,h=void 0===e?f:e>>>0,_=new RegExp(t.source,d+"g");while(r=l.call(_,n)){if(i=_[p],i>u&&(c.push(n.slice(u,r.index)),r[m]>1&&r.index<n[m]&&v.apply(c,r.slice(1)),o=r[0][m],u=i,c[m]>=h))break;_[p]===r.index&&_[p]++}return u===n[m]?!o&&_.test("")||c.push(""):c.push(n.slice(u)),c[m]>h?c.slice(0,h):c}:"0"[h](void 0,0)[m]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,s){var n=t(this),r=void 0==a?void 0:a[e];return void 0!==r?r.call(a,n,s):b.call(String(n),a,s)},function(t,e){var s=d(b,t,this,e,b!==a);if(s.done)return s.value;var l=n(t),v=String(this),h=r(l,RegExp),m=l.unicode,p=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(_?"y":"g"),g=new h(_?l:"^(?:"+l.source+")",p),C=void 0===e?f:e>>>0;if(0===C)return[];if(0===v.length)return null===c(g,v)?[v]:[];var w=0,x=0,y=[];while(x<v.length){g.lastIndex=_?x:0;var k,S=c(g,_?v:v.slice(x));if(null===S||(k=u(o(g.lastIndex+(_?0:x)),v.length))===w)x=i(v,x,m);else{if(y.push(v.slice(w,x)),y.length===C)return y;for(var $=1;$<=S.length-1;$++)if(y.push(S[$]),y.length===C)return y;x=w=k}}return y.push(v.slice(w)),y}]})},"90ad":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tracking"},[a("Navbar"),a("div",{staticClass:"col-lg-11 mx-auto"},t._l(t.gamers,function(e){return a("div",{key:e.user._id,staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("\n            "+t._s(e.user.name)+"\n      ")]),a("div",{staticClass:"card-body"},[a("Action",{attrs:{gamer:e},on:{showModal:t.showModal,deleteAction:t.deleteAction}})],1)])}),0),a("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("table",{staticClass:"table table-bordered table-sm"},[t._m(1),a("tbody",t._l(t.pauses,function(e){return a("tr",{key:e._id},[a("td",[t._v(t._s(t.convertSeconds(e.passedTime)))]),a("td",[t._v(t._s(t.formatDate(e.pauseTime)))]),a("td",[t._v(t._s(t.convertSeconds(e.duration)))]),a("td",[t._v(t._s(t.formatDate(e.remainTime)))]),a("td",[t._v(t._s(t.convertSeconds(e.leftTime)))])])}),0)])])])])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Паузы")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Прошло")]),a("th",{attrs:{scope:"col"}},[t._v("Начало")]),a("th",{attrs:{scope:"col"}},[t._v("Длительность")]),a("th",{attrs:{scope:"col"}},[t._v("Конец")]),a("th",{attrs:{scope:"col"}},[t._v("Осталось")])])])}],r=(a("a481"),a("28a5"),a("d178")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action table-responsive"},[a("table",{staticClass:"table table-bordered table-sm"},[t._m(0),a("tbody",t._l(t.gamer.actions,function(e){return a("tr",{key:e._id},[a("td",[t._v(t._s(t.formatDate(e.createdDate)))]),a("td",[t._v(t._s(e.device.name))]),a("td",[t._v(t._s(t.convertSeconds(e.planPeriod)))]),a("td",[t._v(t._s(t.formatDate(e.planStopDate)))]),a("td",[t._v(t._s(t.convertSeconds(e.factPeriod)))]),a("td",[t._v(t._s(t.formatDate(e.stoppedDate)))]),a("td",[a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(a){return t.showPauses(e.pauses)}}},[t._v("\n                ...\n                ")]),t.isAdmin?a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.$emit("deleteAction",{user:t.gamer.user._id,action:e._id})}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]):t._e()])])}),0)])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Начало")]),a("th",{attrs:{scope:"col"}},[t._v("Устройство")]),a("th",{attrs:{scope:"col"}},[t._v("Планируемая длительность")]),a("th",{attrs:{scope:"col"}},[t._v("Планируемое время окончания")]),a("th",{attrs:{scope:"col"}},[t._v("Длительность")]),a("th",{attrs:{scope:"col"}},[t._v("Время окончания")]),a("th",{attrs:{scope:"col"}})])])}],c=a("04e1"),l=a.n(c),d={name:"action",props:{gamer:Object},methods:{formatDate:function(t){if(t){var e=t.split(".");return e[0].replace("T"," ")}return""},convertSeconds:function(t){if(t){var e=parseInt(t/3600),a=parseInt(t%3600/60),s=t%3600%60;return a<10&&(a="0"+a),s<10&&(s="0"+s),e+":"+a+":"+s}return""},showPauses:function(t){this.$emit("showModal",t)},isAdmin:function(){var t=l()(localStorage.token);return"Админ"===t.role}}},u=d,v=a("2877"),h=Object(v["a"])(u,i,o,!1,null,null,null),m=h.exports,p={name:"tracking",components:{Navbar:r["a"],Action:m},computed:{gamers:function(){return this.$store.state.gamers}},data:function(){return{pauses:[]}},methods:{getGamers:function(){this.$store.dispatch("getGamers").catch(function(t){console.error(t)})},showModal:function(t){this.pauses=t,$("#exampleModal").modal("show")},formatDate:function(t){if(t){var e=t.split(".");return e[0].replace("T"," ")}return""},convertSeconds:function(t){if(t){var e=parseInt(t/3600),a=parseInt(t%3600/60),s=t%3600%60;return a<10&&(a="0"+a),s<10&&(s="0"+s),e+":"+a+":"+s}return""},deleteAction:function(t){this.$store.dispatch("deleteAction",t).catch(function(t){console.error(t)})}},mounted:function(){this.getGamers()}},f=p,_=Object(v["a"])(f,s,n,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-527de5ae.81fec0c1.js.map